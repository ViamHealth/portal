DROP TABLE IF EXISTS `tbl_reminders`;
CREATE TABLE `tbl_reminders` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `details` text NOT NULL, `start_datetime` datetime NOT NULL, `repeat_mode` varchar(32) NOT NULL, `repeat_day` char(2) NOT NULL, `repeat_hour` char(2) NOT NULL, `repeat_min` char(2) NOT NULL, `repeat_weekday` char(9) NOT NULL, `repeat_day_interval` char(3) NOT NULL, `status` varchar(18) NOT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `updated_by` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `user_id` (`user_id`), KEY `status` (`status`), CONSTRAINT `tbl_reminders_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`id`) ON DELETE CASCADE );
DROP TABLE IF EXISTS `tbl_healthfiles`;
CREATE TABLE `tbl_healthfiles` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `name` varchar(256) NOT NULL, `description` text NOT NULL, `mime_type` varchar(256) NOT NULL, `stored_url` varchar(256) NOT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `updated_by` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `user_id` (`user_id`), CONSTRAINT `tbl_healthfiles_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`id`) ON DELETE CASCADE );
DROP TABLE IF EXISTS `tbl_healthfile_tags`;
CREATE TABLE `tbl_healthfile_tags` ( `id` int(11) NOT NULL AUTO_INCREMENT, `healthfile_id` int(11) NOT NULL, `tag` varchar(64) NOT NULL, `created_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `healthfile_id` (`healthfile_id`), CONSTRAINT `tbl_healthfile_tags_ibfk_1` FOREIGN KEY (`healthfile_id`) REFERENCES `tbl_healthfiles` (`id`) ON DELETE CASCADE );
DROP TABLE IF EXISTS `tbl_user_weight_goals`;
CREATE TABLE `tbl_user_weight_goals` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `weight` int(11) NOT NULL, `weight_measure` char(12) NOT NULL, `target_date` date NOT NULL, `interval_num` int(11) NOT NULL, `interval_unit` char(6) NOT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `updated_by` int(11) NOT NULL, `status` varchar(64) NOT NULL, PRIMARY KEY (`id`), KEY `user_id` (`user_id`), CONSTRAINT `tbl_user_weight_goals_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`id`) ON DELETE CASCADE ) ;
DROP TABLE IF EXISTS `tbl_user_weight_readings`;
CREATE TABLE `tbl_user_weight_readings` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_weight_goal_id` int(11) NOT NULL, `weight` int(11) NOT NULL, `weight_measure` char(12) NOT NULL, `reading_date` date NOT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `updated_by` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `user_weight_goal_id` (`user_weight_goal_id`), CONSTRAINT `tbl_user_weight_readings_ibfk_2` FOREIGN KEY (`user_weight_goal_id`) REFERENCES `tbl_user_weight_goals` (`id`) ON DELETE CASCADE ) ;